# 비트코인 & 이더리움

| |<center>![비트코인](http://i68.tinypic.com/30aw6m0.jpg)</center> | <center> ![이더리움](http://i67.tinypic.com/2janibo.jpg) </center> |
|:--------:|:--------:|:--------:|
| **개념** | 전자화폐 | 스마트 컨트랙트 플랫폼 |
| **트랜잭션에 사용한 언어** | 스크립트 언어 | 튜링 완전 언어 |
| **합의 방식** | 작업 증명(POW) |  현재 : 작업증명(GPU 기반) <br> 목표 : 자산증명(POS)</br> |
| **블록 생성 시간** | 약 10분 | 약 12초 |

위  표를 보면 아래와 같은 질문을 생각할 수 있다.

1. 위와 같은 차이가 왜 발생하는가?
2. 위 두가지는 어떻게 다른 것인가?
3. 차이가 만들어 낸 가치는 무엇인가?

그렇다면 지금부터 이더리움의 관점에서 위 질문에 대한 답을 찾아보겠다.

###  가. 개념
비트코인과 이더리움은 개발 목적이 서로 다르다. 비트코인은 화폐의 역할을 수행할 수 있도록 개발된 반면, 이더리움은 모든 자산을 올릴 수 있고 각 자산이 구동하거나 거래되는 방식을 직접 프로그래밍 할 수 있도록 플랫폼을 제공하는 방식으로 설계되어 있다.

여기서 생겨난 개념이 바로  스마트 컨트랙트(Smart Contract)이다. 즉 이더리움을 활용하면 단순히 화폐를 주고 받는 것이 아니라, 예를 들어

> A와 B라는 사람 중 보팅(Vote)을 많이 받은 사람에게 x$을 지급한다

라는  화폐가 오가는 **'조건'** 을 설정할 수 있고, 이 컨트랙트가 블록체인 위에 기록되기 때문에 누구도 처음에 명시된 조건 이외의 조건을 바꿀 수 없으며 특정 조건을 만족시키는 경우 컨트랙트의 내용이 자동으로 실행된다.

따라서 이더리움이 제공하는 플랫폼을 활용하면 어거, 골렘, 오미세고 등 ERC20 토큰으로 불리는 이더리움 블록체인 기반의 새로운 코인을 만들어 낼 수 있다.

### 나. 언어
비트코인의 경우 트랜잭션에서 튜링 불완전한 스크립트 언어를 사용했고, 이더리움은 Solidity와 같은 튜링 완전 언어를 사용했다. 둘의 차이점은 '루프'가 가능한지에 있다. 이 언어적인 차이는 어떤 결과를 가져올까?

비트코인의 트랜잭션에서 이 루프가 없는 이유는 무한 루프를 통한 공격(DoS, DDoS)을 방지하기 위해서이다.비트코인은 '이체'에 대해서만 수수료를 물었기 때문에 악의적인 사용자가 특정 작업을 추가해서 이체해도 추가적인 수수료는 지불하지 않는다.

하지만 이더리움의 경우, 스마트 컨트랙트를 활용한 DApp이 있는 것처럼 단순히 돈을 주고 받는 이외에 다양한 작업을 수행시킬 수 있다. 그래서 이더리움은 이체뿐만 아니라 컴퓨팅 자원을 소모하는 작업을 수행하는데에도 수수료를 물린다. 따라서 사용자가 네트워크에 특정작업을 수행시키려면 수수료를 내야하고, 작업의 규모보다 수수료가 적으면 작업이 중단되는 현상이 발생한다.

## 다. 합의 방식
둘 모두 현재 PoW(Proof-of-Work) 방식을 사용하고 있지만, 둘 사이에는 약간의 차이점이 있다.

비트코인의 마이닝 알고리즘은  단순히 SHA-256 연산만을 필요로 한다. 따라서 해당 연산만을 빨리 수행할 수 있도록 ASIC을 구성할 수 있다.

![BitcoinMiningFlow](http://i65.tinypic.com/156egcl.jpg)

이더리움의 경우 Ethash 라고 하는 수정된 PoW  방식을 이용한다. 이 방식은 DAG라는 2차원 배열 데이터를 활용해 미리 알 수 없는 순차적 메모리 연산을 요구해  GPU로 연산하는 것이 더 효율적이도록 만들어 기존의 ASIC을 이용한 마이닝을 억제하여 대규모 기업, 공장이 아닌 일반 마이너들을 유지시키는 역할을 한다.

![EthereumMiningFlow](http://i64.tinypic.com/wsr72w.png)

하지만 이런 구조는 마이너로 하여금 불필요한 연산을 수행하도록 하기 때문에 리소스의 낭비가 발생한고, 또한 PoW 자체의 문제인 파워가 큰 마이너의 영향력이 크고, 파워를 유지하기 위해 사용하는 자원의 낭비가 크기 때문에, 이더리움은 장기적으로 PoS(Proof-of-Stake) 방식으로 전환하려 하고 있다. 다시말해 마이닝에 들어가는 비용을 줄이고, 네트워크를 최대한 분산시켜 안정성을 확보하는 방법으로 방향 전환을 고려하고 있다는 것이다.

### 라. 블록 생성 시간
비트코인의 경우 약 10분, 이더리움은 약 12~21초 정도에 한 번씩 블록이 생성된다.

이더리움의 경우 블록 생성 시간이 짧아 발생하는 발생하는 엉클 블록¹(Uncle Block)이 이더리움의 보안성을 저해한다.

이더리움은 이 문제를 해결하기 위해 GHOST(Greedy Heaviest Observed Subtree) 프로토콜을 이용한다. GHOST 프로토콜은 누적 난이도가 높은 블록을 선택하고, 엉클 블록에 대한 보상을 지급한다. 또한 다음 블록이 이 Uncle 블록을 증명해 주는데 그 블록의 마이너에게도 보상을 제공한다.

![UncleBlock](http://i67.tinypic.com/34t5roi.png)

![UncleBlockFee](http://i66.tinypic.com/2psrrz8.png)

위 비교 내용에서 확인할 수 있듯이 비트코인과 이더리움을 만들기 위해서는 여러 가지 기술들이 필요하다는 것을 알 수 있다. 다음 문서에서는 이번 문서에서 소개하지 못한 여러 가지 코인을 구성하는 기술적인 요소들과 알고리즘에 대해 설명하겠다.

---
¹ 블록이 네트워크에 전파되는데 일정한 시간이 걸리기 때문에 발생하는 문제. 비트코인에서는 스테일 블록(Stale Blcok)이라고 하며, 블록 생성에는 성공했지만, 난이도가 낮아 정상 체인에는 등록되지 못한 블록을 뜻한다.
